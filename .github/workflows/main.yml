name: Android 100% Fixed
on: workflow_dispatch

jobs:
  android:
    runs-on: ubuntu-latest
    steps:
      - name: ЁЯМР Connect Tailscale
        uses: tailscale/github-action@v2
        with:
          authkey: ${{ secrets.TAILSCALE_AUTHKEY }}
          args: --hostname=stable-android

      - name: ЁЯЫая╕П Install Clean Emulator
        run: |
          sudo apt-get update
          # Fluxbox ржПрж░ ржмржжрж▓рзЗ ржЖржорж░рж╛ рж╕рж░рж╛рж╕рж░рж┐ Xvfb ржУ x11vnc ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржм ржЬржЯрж┐рж▓рждрж╛ ржПрзЬрж╛рждрзЗ
          sudo apt-get install -y qemu-kvm qemu-system-x86 xvfb x11vnc
          
      - name: ЁЯТ┐ Setup & Auto-Start Android
        run: |
          # ISO ржбрж╛ржЙржирж▓рзЛржб
          curl -L -o android.iso "https://sourceforge.net/projects/android-x86/files/Release%209.0/android-x86_64-9.0-r2.iso/download"
          
          # ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ рж╕рзНржХрзНрж░рж┐ржи рж╕рзЗржЯржЖржк (Resolution 1024x768)
          Xvfb :99 -screen 0 1024x768x16 &
          export DISPLAY=:99
          
          # ржЕрзНржпрж╛ржирзНржбрзНрж░ржпрж╝рзЗржб рж▓ржЮрзНржЪрж╛рж░ (QEMU ржЕржирзЗржХ ржмрзЗрж╢рж┐ рж╕рзНржЯрзЗржмрж▓ GitHub-ржП)
          qemu-system-x86_64 -m 3072 -cdrom android.iso -boot d -net nic -net user -display x11 &
          
          # VNC рж╕рж╛рж░рзНржнрж╛рж░ рж╢рзБрж░рзБ ржХрж░рж╛ (ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб: android123)
          mkdir -p ~/.vnc
          x11vnc -storepasswd "android123" ~/.vnc/passwd
          x11vnc -rfbauth ~/.vnc/passwd -display :99 -forever -bg -rfbport 5900
          
          TS_IP=$(tailscale ip -4)
          echo "=========================================="
          echo "тЬЕ рж╕рзЗрж╢ржи рж╕ржлрж▓ржнрж╛ржмрзЗ рж╢рзБрж░рзБ рж╣рзЯрзЗржЫрзЗ!"
          echo "ЁЯМР IP: $TS_IP"
          echo "ЁЯФС PASS: android123"
          echo "ЁЯФМ PORT: 5900"
          echo "=========================================="
          
          # ржмрзБржЯ рж╣рждрзЗ рж╕ржорзЯ ржжрж┐ржи ржПржмржВ рж╕рзЗрж╢ржи ржзрж░рзЗ рж░рж╛ржЦрзБржи
          sleep 3600
